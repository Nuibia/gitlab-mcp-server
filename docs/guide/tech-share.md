---
sidebar: false
footer: false
---

# ğŸ“– æ¼«è°ˆ MCP

## ğŸš€ GitLab MCP æœåŠ¡å™¨ - æŠ€æœ¯åˆ†äº«

## ğŸ¤– ä»€ä¹ˆæ˜¯ MCPï¼Ÿ

### MCP å°±åƒæ˜¯ AI çš„"å·¥å…·ç®±"

æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æœ‰ä¸€ä¸ªå¾ˆèªæ˜çš„ AI åŠ©æ‰‹ï¼ˆæ¯”å¦‚ Claudeï¼‰ï¼Œå®ƒå¯ä»¥å¸®ä½ å†™ä»£ç ã€å›ç­”é—®é¢˜ã€‚ä½†æ˜¯è¿™ä¸ªåŠ©æ‰‹åªèƒ½åœ¨èŠå¤©æ¡†é‡Œè·Ÿä½ è¯´è¯ï¼Œä¸èƒ½ç›´æ¥å¸®ä½ åšå®é™…çš„å·¥ä½œï¼Œæ¯”å¦‚ï¼š

- æŸ¥çœ‹å…¬å¸çš„ GitLab é¡¹ç›®
- ä¿®æ”¹ä»£ç æ–‡ä»¶
- è¿è¡Œå‘½ä»¤
- è®¿é—®æ•°æ®åº“

**MCP å°±æ˜¯ç»™ AI åŠ©æ‰‹é…å¤‡çš„"å·¥å…·ç®±"**ï¼Œè®©å®ƒèƒ½å¤Ÿå®‰å…¨åœ°ä½¿ç”¨å„ç§å·¥å…·å’Œè®¿é—®å¤–éƒ¨æ•°æ®ã€‚

### é€šä¿—çš„æ¯”å–»ï¼šAI åŠ©æ‰‹çš„"æ‰‹è‡‚"

```typescript
// æ²¡æœ‰ MCP çš„ AI åŠ©æ‰‹
const aiAssistant = {
  canTalk: true,        // âœ… èƒ½èŠå¤©
  canSeeFiles: false,   // âŒ çœ‹ä¸åˆ°æ–‡ä»¶
  canUseGitLab: false,  // âŒ ç”¨ä¸äº† GitLab
  canRunCommands: false // âŒ è¿è¡Œä¸äº†å‘½ä»¤
};

// æœ‰ MCP çš„ AI åŠ©æ‰‹
const aiAssistantWithMCP = {
  canTalk: true,        // âœ… èƒ½èŠå¤©
  canSeeFiles: true,    // âœ… èƒ½é€šè¿‡ MCP æŸ¥çœ‹æ–‡ä»¶
  canUseGitLab: true,   // âœ… èƒ½é€šè¿‡ MCP ä½¿ç”¨ GitLab
  canRunCommands: true  // âœ… èƒ½é€šè¿‡ MCP è¿è¡Œå‘½ä»¤
};
```

### MCP è§£å†³çš„æ ¸å¿ƒé—®é¢˜

**é—®é¢˜1ï¼šAI åŠ©æ‰‹"æ‰‹æ— å¯¸é“"**
- ä¼ ç»Ÿ AI åªèƒ½èŠå¤©ï¼Œä¸èƒ½å¹²æ´»
- éœ€è¦æ‰‹åŠ¨å¤åˆ¶ç²˜è´´ä¿¡æ¯
- æ•ˆç‡ä½ä¸‹ï¼Œå®¹æ˜“å‡ºé”™

**é—®é¢˜2ï¼šä¼ä¸šå®‰å…¨é¡¾è™‘**
- AI ä¸èƒ½ç›´æ¥è®¿é—®å…¬å¸å†…ç½‘
- æ•°æ®å®‰å…¨å’Œæƒé™æ§åˆ¶å›°éš¾
- ä¼ä¸šä¸æ•¢è®© AI è¿æ¥å†…éƒ¨ç³»ç»Ÿ

### MCP çš„å·¥ä½œåŸç†

```
ä½ ï¼ˆå¼€å‘è€…ï¼‰     AIåŠ©æ‰‹ï¼ˆClaudeï¼‰     MCPæœåŠ¡å™¨      GitLabæœåŠ¡å™¨
     â”‚                â”‚                â”‚                â”‚
     â”‚   "å¸®æˆ‘æŸ¥çœ‹é¡¹ç›®Açš„åˆ†æ”¯"          â”‚                â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                â”‚                â”‚
     â”‚                â”‚   "éœ€è¦è°ƒç”¨GitLabå·¥å…·"           â”‚
     â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                â”‚
     â”‚                â”‚                â”‚   "æŸ¥è¯¢åˆ†æ”¯ä¿¡æ¯"   â”‚
     â”‚                â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
     â”‚                â”‚                â”‚   "è¿”å›åˆ†æ”¯æ•°æ®"   â”‚
     â”‚                â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                â”‚
     â”‚                â”‚   "åˆ†æ”¯ä¿¡æ¯ï¼šmain, dev..."      â”‚
     â”‚   "åˆ†æ”¯ä¿¡æ¯ï¼šmain, dev..."      â”‚                â”‚
     â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                â”‚
```

**ç®€å•æ¥è¯´ï¼š**
1. ä½ å‘Šè¯‰ AI åŠ©æ‰‹æƒ³è¦åšä»€ä¹ˆ
2. AI åŠ©æ‰‹é€šè¿‡ MCP åè®®è°ƒç”¨ç›¸åº”çš„å·¥å…·
3. MCP æœåŠ¡å™¨å®‰å…¨åœ°æ‰§è¡Œæ“ä½œå¹¶è¿”å›ç»“æœ
4. AI åŠ©æ‰‹æŠŠç»“æœå‘Šè¯‰ä½ 

### MCP çš„æ ¸å¿ƒä¼˜åŠ¿

- **ğŸ” å®‰å…¨ç¬¬ä¸€**ï¼šä¼ä¸šå¯ä»¥ç²¾ç¡®æ§åˆ¶ AI èƒ½è®¿é—®å“ªäº›æ•°æ®
- **ğŸ¢ ä¼ä¸šå‹å¥½**ï¼šå®Œç¾æ”¯æŒå†…ç½‘ç¯å¢ƒå’Œç§æœ‰åŒ–éƒ¨ç½²
- **âš¡ æ•ˆç‡æå‡**ï¼šAI å¯ä»¥ç›´æ¥å¸®ä½ å®Œæˆå¾ˆå¤šé‡å¤æ€§å·¥ä½œ
- **ğŸ”§ æ˜“æ‰©å±•**ï¼šå¯ä»¥è½»æ¾æ·»åŠ æ–°çš„å·¥å…·å’ŒåŠŸèƒ½

### MCP çš„ä¼ è¾“æ–¹å¼

**MCP å®˜æ–¹æ”¯æŒçš„ä¼ è¾“åè®®ï¼š**

#### 1. **Stdio æ¨¡å¼** - æ ‡å‡†è¾“å…¥è¾“å‡º
```typescript
// æœ€ç®€å•çš„é›†æˆæ–¹å¼ï¼Œé€‚åˆæœ¬åœ°å·¥å…·
const transport = new StdioServerTransport();
await server.connect(transport);
```
- âœ… **ä¼˜ç‚¹**ï¼šç®€å•ã€æ— ä¾èµ–ã€æœ¬åœ°å®‰å…¨
- âŒ **ç¼ºç‚¹**ï¼šä»…æ”¯æŒæœ¬åœ°ã€æ— æ³•è¿œç¨‹è®¿é—®
- ğŸ¯ **é€‚ç”¨åœºæ™¯**ï¼šæ¡Œé¢åº”ç”¨ã€å‘½ä»¤è¡Œå·¥å…·

#### 2. **Streamable HTTP æ¨¡å¼** - å¯æµå¼HTTP
```typescript
// æ”¯æŒè¿œç¨‹è®¿é—®çš„ç°ä»£åŒ–HTTPä¼ è¾“
const transport = new StreamableHTTPServerTransport();
await server.connect(transport);
```
- âœ… **ä¼˜ç‚¹**ï¼šæ”¯æŒè¿œç¨‹è®¿é—®ã€ä¼šè¯ç®¡ç†ã€ç°ä»£HTTPç‰¹æ€§
- âœ… **ç¼ºç‚¹**ï¼šéœ€è¦æœåŠ¡å™¨éƒ¨ç½²
- ğŸ¯ **é€‚ç”¨åœºæ™¯**ï¼šWebæœåŠ¡ã€è¿œç¨‹å·¥å…·ã€äº‘éƒ¨ç½²

#### 3. **SSE æ¨¡å¼** - æœåŠ¡å™¨å‘é€äº‹ä»¶ï¼ˆå·²åºŸå¼ƒï¼‰
```typescript
// å…¼å®¹æ€§ä¼ è¾“ï¼Œå·²è¢«Streamable HTTPæ›¿ä»£
const transport = new SSEServerTransport('/messages', res);
await server.connect(transport);
```
- âš ï¸ **çŠ¶æ€**ï¼šå·²åºŸå¼ƒï¼Œå»ºè®®è¿ç§»åˆ°Streamable HTTP
- ğŸ“‹ **ç”¨é€”**ï¼šå‘åå…¼å®¹æ—§ç‰ˆæœ¬å®¢æˆ·ç«¯

### MCP ä¸å…¶ä»– Agent åè®®çš„åŒºåˆ«

**âŒ æ¾„æ¸…ä¸€ä¸ªè¯¯åŒºï¼šä¸æ˜¯æ‰€æœ‰ Agent éƒ½é€šè¿‡ MCP å®ç°**

```typescript
// MCP åªæ˜¯ä¼—å¤šåè®®ä¸­çš„ä¸€ç§
const agentProtocols = {
  mcp: "Model Context Protocol (Anthropic)",
  openai: "OpenAI Assistant API",
  langchain: "LangChain Agent Framework",
  llamaindex: "LlamaIndex RAG Framework",
  custom: "è‡ªå®šä¹‰ Agent å®ç°"
};
```

**MCP çš„ç‹¬ç‰¹ä¼˜åŠ¿ï¼š**
- **ğŸ¯ æ ‡å‡†åŒ–åè®®**ï¼šç»Ÿä¸€çš„æ¥å£æ ‡å‡†ï¼Œä¾¿äºé›†æˆ
- **ğŸ”’ ä¼ä¸šå‹å¥½**ï¼šç‰¹åˆ«é€‚åˆå†…ç½‘å’Œç§æœ‰åŒ–éƒ¨ç½²
- **âš¡ é«˜æ€§èƒ½**ï¼šä¼˜åŒ–çš„é€šä¿¡åè®®å’Œå·¥å…·è°ƒç”¨
- **ğŸš€ æ˜“æ‰©å±•**ï¼šæ’ä»¶åŒ–çš„å·¥å…·ç³»ç»Ÿ

### ä¸»æµ Agent å®ç°æ–¹å¼å¯¹æ¯”

| å®ç°æ–¹å¼ | ä»£è¡¨ | é€‚ç”¨åœºæ™¯ | æ˜¯å¦åŸºäºMCP |
|---------|------|---------|-----------|
| **MCPåè®®** | Claude Desktop, Cursor | å·¥å…·é›†æˆ, ä¼ä¸šå†…ç½‘ | âœ… æ˜¯ |
| **Assistant API** | ChatGPT Plugins | é€šç”¨å·¥å…·é›†æˆ | âŒ å¦ |
| **LangChain** | å„ç§Agentåº”ç”¨ | å¤æ‚å·¥ä½œæµ | âŒ å¦ |
| **è‡ªå®šä¹‰æ¡†æ¶** | ä¼ä¸šè‡ªç ”Agent | ç‰¹å®šä¸šåŠ¡éœ€æ±‚ | âŒ å¦ |

### MCP vs RAGï¼šä¸¤ç§ä¸åŒçš„æŠ€æœ¯æ–¹æ¡ˆ

**RAG (Retrieval-Augmented Generation)** å’Œ **MCP (Model Context Protocol)** æ˜¯ä¸¤ç§ä¸åŒçš„ AI å¢å¼ºæŠ€æœ¯ï¼š

#### ğŸ” RAGï¼šçŸ¥è¯†å¢å¼ºæŠ€æœ¯
```typescript
// RAG çš„å·¥ä½œåŸç†
const ragProcess = {
  // 1. ç”¨æˆ·æŸ¥è¯¢
  query: "å¦‚ä½•éƒ¨ç½²è¿™ä¸ªé¡¹ç›®ï¼Ÿ",

  // 2. æ£€ç´¢ç›¸å…³æ–‡æ¡£
  retrieval: "ä»çŸ¥è¯†åº“ä¸­æ‰¾åˆ°éƒ¨ç½²æ–‡æ¡£",

  // 3. å¢å¼ºç”Ÿæˆå›ç­”
  generation: "åŸºäºæ£€ç´¢åˆ°çš„æ–‡æ¡£ç”Ÿæˆå‡†ç¡®å›ç­”"
};
```

**RAG çš„ç‰¹ç‚¹ï¼š**
- **ğŸ“š çŸ¥è¯†åº“é›†æˆ**ï¼šè¿æ¥æ–‡æ¡£ã€æ•°æ®åº“ç­‰çŸ¥è¯†æº
- **ğŸ¯ å‡†ç¡®æ€§æå‡**ï¼šåŸºäºæ£€ç´¢ç»“æœç”Ÿæˆæ›´å‡†ç¡®çš„å›ç­”
- **ğŸ”„ å®æ—¶æ›´æ–°**ï¼šçŸ¥è¯†åº“å¯ä»¥åŠ¨æ€æ›´æ–°
- **ğŸ“– é€‚ç”¨åœºæ™¯**ï¼šé—®ç­”ç³»ç»Ÿã€æ–‡æ¡£åŠ©æ‰‹

#### ğŸ”§ MCPï¼šå·¥å…·è°ƒç”¨åè®®
```typescript
// MCP çš„å·¥ä½œåŸç†
const mcpProcess = {
  // 1. ç”¨æˆ·è¯·æ±‚
  request: "å¸®æˆ‘æŸ¥çœ‹ GitLab é¡¹ç›®çŠ¶æ€",

  // 2. è°ƒç”¨å·¥å…·
  toolCall: "é€šè¿‡ MCP åè®®è°ƒç”¨ GitLab API",

  // 3. æ‰§è¡Œæ“ä½œ
  execution: "å®‰å…¨åœ°è®¿é—® GitLab æ•°æ®",

  // 4. è¿”å›ç»“æœ
  response: "é¡¹ç›®çŠ¶æ€ä¿¡æ¯"
};
```

**MCP çš„ç‰¹ç‚¹ï¼š**
- **âš™ï¸ å·¥å…·é›†æˆ**ï¼šè¿æ¥å¤–éƒ¨å·¥å…·å’ŒæœåŠ¡
- **ğŸ¢ ä¼ä¸šå‹å¥½**ï¼šæ”¯æŒå†…ç½‘å’Œç§æœ‰åŒ–éƒ¨ç½²
- **ğŸ”’ å®‰å…¨æ§åˆ¶**ï¼šç²¾ç¡®çš„æƒé™ç®¡ç†
- **ğŸš€ å®æ—¶äº¤äº’**ï¼šå¯ä»¥æ‰§è¡Œå®é™…æ“ä½œ

### ğŸ¤ RAG å’Œ MCP å¯ä»¥å®Œç¾ç»“åˆ

**âœ… æ˜¯çš„ï¼Œå®ƒä»¬ä¸ä»…å¯ä»¥åŒæ—¶ä½¿ç”¨ï¼Œè€Œä¸”ç›¸è¾…ç›¸æˆï¼**

```typescript
// RAG + MCP çš„ç»“åˆä½¿ç”¨
const hybridAI = {
  // ä½¿ç”¨ RAG è·å–çŸ¥è¯†
  knowledge: "ä»æ–‡æ¡£åº“æ£€ç´¢ç›¸å…³ä¿¡æ¯",

  // ä½¿ç”¨ MCP è°ƒç”¨å·¥å…·
  action: "æ‰§è¡Œå®é™…æ“ä½œ",

  // ç»¼åˆç”Ÿæˆå›ç­”
  response: "åŸºäºçŸ¥è¯†å’Œå·¥å…·ç»“æœçš„å®Œæ•´å›ç­”"
};
```

## ğŸ§  ä»€ä¹ˆæ˜¯ Agentï¼ŸAgent ä¸ MCP çš„å…³ç³»

### Agent çš„å®šä¹‰å’Œæ ¸å¿ƒæ¦‚å¿µ

**Agent (æ™ºèƒ½ä»£ç†)** æ˜¯èƒ½å¤Ÿè‡ªä¸»æ„ŸçŸ¥ç¯å¢ƒã€åšå‡ºå†³ç­–å¹¶æ‰§è¡ŒåŠ¨ä½œçš„æ™ºèƒ½å®ä½“ã€‚

```typescript
// Agent çš„åŸºæœ¬æ¶æ„
interface Agent {
  // æ„ŸçŸ¥èƒ½åŠ› - è·å–ä¿¡æ¯
  perceive(): EnvironmentState;

  // æ¨ç†èƒ½åŠ› - åˆ†æå’Œå†³ç­–
  reason(state: EnvironmentState): Action;

  // æ‰§è¡Œèƒ½åŠ› - æ‰§è¡ŒåŠ¨ä½œ
  act(action: Action): Result;

  // å­¦ä¹ èƒ½åŠ› - ä»ç»éªŒä¸­æ”¹è¿›
  learn(experience: Experience): void;
}
```

**Agent çš„ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›ï¼š**
- **ğŸ§  è‡ªä¸»æ€§**ï¼šèƒ½å¤Ÿåœ¨æ²¡æœ‰äººç±»å¹²é¢„çš„æƒ…å†µä¸‹ç‹¬ç«‹å·¥ä½œ
- **ğŸ¯ ç›®æ ‡å¯¼å‘**ï¼šèƒ½å¤Ÿæœç€ç‰¹å®šç›®æ ‡é‡‡å–è¡ŒåŠ¨
- **ğŸ”„ é€‚åº”æ€§**ï¼šèƒ½å¤Ÿæ ¹æ®ç¯å¢ƒå˜åŒ–è°ƒæ•´è¡Œä¸º

### Agent çš„ä¸åŒç±»å‹

#### ğŸ¤– ç®€å• Agent
```typescript
const simpleAgent = {
  input: "ç”¨æˆ·è¯·æ±‚",
  process: "å›ºå®šè§„åˆ™å¤„ç†",
  output: "é¢„å®šä¹‰å“åº”"
};
```

#### ğŸ§  å¤æ‚ Agentï¼ˆæ”¯æŒå­¦ä¹ ï¼‰
```typescript
const learningAgent = {
  input: "ç¯å¢ƒæ„ŸçŸ¥",
  process: "æœºå™¨å­¦ä¹ æ¨¡å‹",
  output: "åŠ¨æ€å†³ç­–",
  learning: "æŒç»­æ”¹è¿›"
};
```

### Agent ä¸ MCP çš„å…³ç³»

**MCP æ˜¯ Agent çš„"å·¥å…·è°ƒç”¨åè®®"ï¼Œä¸æ˜¯ Agent æœ¬èº«**

```typescript
// Agent ä½¿ç”¨ MCP çš„å…³ç³»
const agentWithMCP = {
  // Agent å±‚ - å†³ç­–å’Œæ¨ç†
  agent: {
    goal: "å®Œæˆç”¨æˆ·ä»»åŠ¡",
    planning: "åˆ¶å®šæ‰§è¡Œè®¡åˆ’",
    reasoning: "åˆ†æå½“å‰çŠ¶æ€"
  },

  // MCP å±‚ - å·¥å…·è°ƒç”¨
  mcp: {
    protocol: "æ ‡å‡†åŒ–é€šä¿¡",
    tools: "å¤–éƒ¨å·¥å…·é›†æˆ",
    security: "å®‰å…¨è®¿é—®æ§åˆ¶"
  },

  // å·¥å…·å±‚ - å®é™…æ‰§è¡Œ
  tools: ["GitLab API", "æ–‡ä»¶ç³»ç»Ÿ", "æ•°æ®åº“"]
};
```

**å…³ç³»æ€»ç»“ï¼š**
- **Agent æ˜¯"å¤§è„‘"**ï¼šè´Ÿè´£æ€è€ƒã€å†³ç­–ã€è§„åˆ’
- **MCP æ˜¯"ç¥ç»ç³»ç»Ÿ"**ï¼šè´Ÿè´£è¿æ¥å¤§è„‘å’Œå¤–éƒ¨å·¥å…·
- **å·¥å…·æ˜¯"è‚¢ä½“"**ï¼šè´Ÿè´£å®é™…æ‰§è¡Œæ“ä½œ

### Agent ä¸å„ç§åè®®çš„å…³ç³»

**ğŸ¯ Agent æ˜¯æ¶æ„å±‚ï¼Œåè®®æ˜¯é€šä¿¡å±‚**

#### 1. Agent ä½¿ç”¨ MCP åè®®
```typescript
// Claude Desktop ä¸­çš„ Agent + MCP
const claudeAgent = {
  agent: "Claude çš„æ¨ç†å¼•æ“",
  protocol: "MCP åè®®",
  tools: ["æ–‡ä»¶ç¼–è¾‘å™¨", "ç»ˆç«¯", "æµè§ˆå™¨"],
  workflow: "Agent æ€è€ƒ â†’ MCP è°ƒç”¨ â†’ å·¥å…·æ‰§è¡Œ"
};
```

#### 2. Agent ä½¿ç”¨å…¶ä»–åè®®
```typescript
// ä¸åŒåè®®åœ¨ Agent ä¸­çš„åº”ç”¨
const agentProtocols = {
  // ä½¿ç”¨ MCP è¿›è¡Œå·¥å…·è°ƒç”¨
  mcp: "æ ‡å‡†åŒ–å·¥å…·é›†æˆåè®®",

  // ä½¿ç”¨ RAG è¿›è¡ŒçŸ¥è¯†æ£€ç´¢
  rag: "æ£€ç´¢å¢å¼ºç”ŸæˆæŠ€æœ¯",

  // ä½¿ç”¨ LangChain è¿›è¡Œå·¥ä½œæµç¼–æ’
  langchain: "Agent æ¡†æ¶å’Œå·¥å…·é“¾",

  // ä½¿ç”¨è‡ªå®šä¹‰åè®®
  custom: "ç‰¹å®šä¸šåŠ¡åœºæ™¯çš„ä¸“ç”¨åè®®"
};
```

#### 3. æ··åˆåè®®æ¶æ„
```typescript
// ç°ä»£ Agent çš„æ··åˆæ¶æ„
const modernAgent = {
  // æ ¸å¿ƒ Agent å¼•æ“
  core: "æ¨ç†å’Œå†³ç­–å¼•æ“",

  // å¤šç§åè®®æ”¯æŒ
  protocols: {
    mcp: "å·¥å…·è°ƒç”¨",
    rag: "çŸ¥è¯†æ£€ç´¢",
    api: "æœåŠ¡é›†æˆ",
    custom: "ä¸šåŠ¡å®šåˆ¶"
  },

  // ç»Ÿä¸€æ¥å£å±‚
  interface: "åè®®é€‚é…å™¨",

  // å·¥å…·ç”Ÿæ€
  tools: ["å„ç§å¤–éƒ¨å·¥å…·å’ŒæœåŠ¡"]
};
```

### Agent çš„å®ç°å±‚æ¬¡

**Agent å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªåˆ†å±‚æ¶æ„ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åº”ç”¨å±‚ Agent    â”‚ â† ä¸šåŠ¡é€»è¾‘ã€ç”¨æˆ·äº¤äº’
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æ¡†æ¶å±‚ Agent    â”‚ â† LangChainã€LlamaIndex
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   åè®®å±‚          â”‚ â† MCPã€è‡ªå®šä¹‰åè®®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å·¥å…·å±‚          â”‚ â† APIã€æ–‡ä»¶ç³»ç»Ÿã€æ•°æ®åº“
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   åŸºç¡€è®¾æ–½å±‚      â”‚ â† æ¨¡å‹ã€è®¡ç®—èµ„æº
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Agent ä¸ MCP çš„å®é™…åº”ç”¨åœºæ™¯

#### ğŸ“‹ åœºæ™¯1ï¼šä»£ç å¼€å‘åŠ©æ‰‹
```
å¼€å‘è€…: "å¸®æˆ‘ä¼˜åŒ–è¿™ä¸ªå‡½æ•°"
      â†“
Agent: åˆ†æä»£ç ï¼Œåˆ¶å®šä¼˜åŒ–è®¡åˆ’
      â†“
MCP: è°ƒç”¨ä»£ç åˆ†æå·¥å…·
      â†“
å·¥å…·: æ‰§è¡Œä»£ç åˆ†æå’Œä¼˜åŒ–
      â†“
Agent: åŸºäºç»“æœç”Ÿæˆå»ºè®®
```

#### ğŸš€ åœºæ™¯2ï¼šé¡¹ç›®ç®¡ç†åŠ©æ‰‹
```
ç”¨æˆ·: "å‡†å¤‡é¡¹ç›®éƒ¨ç½²"
      â†“
Agent: æ£€æŸ¥éƒ¨ç½²æ¡ä»¶ï¼Œåˆ¶å®šéƒ¨ç½²è®¡åˆ’
      â†“
MCP: è°ƒç”¨ GitLab API å’Œ CI/CD å·¥å…·
      â†“
å·¥å…·: æ‰§è¡Œè‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹
      â†“
Agent: ç›‘æ§éƒ¨ç½²çŠ¶æ€å¹¶æŠ¥å‘Šç»“æœ
```

### Agent ç”Ÿæ€çš„å‘å±•è¶‹åŠ¿

**ğŸ”® æœªæ¥ Agent å°†æœç€æ··åˆåŒ–ã€æ ‡å‡†åŒ–æ–¹å‘å‘å±•ï¼š**

1. **ğŸ¯ åè®®æ ‡å‡†åŒ–**ï¼šMCP ç­‰åè®®æˆä¸ºä¸»æµ
2. **ğŸ”§ å·¥å…·ç”Ÿæ€åŒ–**ï¼šä¸°å¯Œçš„å·¥å…·å’Œæ’ä»¶ç”Ÿæ€
3. **ğŸ§  æ¨ç†å¢å¼º**ï¼šæ›´å¼ºçš„æ¨ç†å’Œè§„åˆ’èƒ½åŠ›
4. **ğŸ¢ ä¼ä¸šå‹å¥½**ï¼šæ›´å¥½çš„å®‰å…¨å’Œåˆè§„æ”¯æŒ

### æ€»ç»“ï¼šAgentã€MCP å’Œåè®®çš„å…³ç³»

- **Agent** æ˜¯æ™ºèƒ½å®ä½“ï¼Œèƒ½å¤Ÿè‡ªä¸»å†³ç­–å’Œæ‰§è¡Œä»»åŠ¡
- **MCP** æ˜¯ Agent è¿æ¥å¤–éƒ¨å·¥å…·çš„æ ‡å‡†åè®®
- **åè®®** æ˜¯ Agent ä¸å¤–éƒ¨ä¸–ç•Œé€šä¿¡çš„æ¡¥æ¢
- **Agent å¯ä»¥åŒæ—¶ä½¿ç”¨å¤šç§åè®®**ï¼Œæ ¹æ®ä»»åŠ¡éœ€æ±‚é€‰æ‹©æœ€é€‚åˆçš„å·¥å…·

**æœ€ç»ˆï¼ŒAgent æ˜¯"æŒ‡æŒ¥å®˜"ï¼Œåè®®æ˜¯"é€šä¿¡å…µ"ï¼Œå·¥å…·æ˜¯"æ‰§è¡Œè€…"**ï¼Œå®ƒä»¬ååŒå·¥ä½œæ„å»ºå®Œæ•´çš„AIåº”ç”¨ç”Ÿæ€ã€‚

### ä¸ºä»€ä¹ˆé€‰æ‹© MCPï¼Ÿ

**MCP çš„æ ¸å¿ƒä»·å€¼åœ¨äºæ ‡å‡†åŒ–å’Œå®‰å…¨æ€§ï¼š**

1. **ğŸ”§ ç»Ÿä¸€çš„å·¥å…·æ¥å£**ï¼šä¸ç®¡ä»€ä¹ˆå·¥å…·ï¼Œéƒ½ç”¨åŒæ ·çš„æ–¹å¼è°ƒç”¨
2. **ğŸ¢ ä¼ä¸šçº§å®‰å…¨**ï¼šç²¾ç¡®çš„æƒé™æ§åˆ¶å’Œæ•°æ®éš”ç¦»
3. **âš™ï¸ æ˜“äºç»´æŠ¤**ï¼šæ ‡å‡†åŒ–çš„åè®®å‡å°‘é›†æˆæˆæœ¬
4. **ğŸš€ æŒç»­æ¼”è¿›**ï¼šAnthropic æŒç»­æ”¹è¿›åè®®æ ‡å‡†

### ä¸ºä»€ä¹ˆéœ€è¦ GitLab MCP æœåŠ¡å™¨ï¼Ÿ

**GitLab æ˜¯å¼€å‘è€…çš„"å·¥ä½œå°"**ï¼ŒåŒ…å«äº†ï¼š
- é¡¹ç›®ä»£ç å’Œåˆ†æ”¯
- é—®é¢˜è·Ÿè¸ªå’Œåˆå¹¶è¯·æ±‚
- CI/CD æµæ°´çº¿
- å›¢é˜Ÿåä½œä¿¡æ¯

**MCP æ˜¯ AI åŠ©æ‰‹çš„"å·¥å…·ç®±"**ï¼Œè®© AI èƒ½å¤Ÿè°ƒç”¨å„ç§å¤–éƒ¨å·¥å…·å’ŒæœåŠ¡ã€‚

> **ğŸ“– é¢å‘å¯¹è±¡**ï¼šæƒ³è¦å¼€å‘ MCP æœåŠ¡å™¨çš„å¼€å‘è€…
>
> æœ¬æ–‡æ¡£æ·±å…¥ä»‹ç» MCP åè®®çš„æ ¸å¿ƒæ¦‚å¿µï¼Œé€šè¿‡ GitLab é¡¹ç›®æ¼”ç¤ºå¼€å‘å…¨æµç¨‹ã€‚

## ğŸ¯ GitLab é¡¹ç›®æ¼”ç¤º

### ä¸ºä»€ä¹ˆé€‰æ‹© GitLab ä½œä¸ºæ¼”ç¤ºæ¡ˆä¾‹ï¼Ÿ

æˆ‘ä»¬é€‰æ‹© GitLab ä½œä¸º MCP å¼€å‘çš„æ¼”ç¤ºæ¡ˆä¾‹ï¼Œå› ä¸ºï¼š

- **ğŸ“š ä¸°å¯Œçš„ API**ï¼šGitLab æä¾›äº†å®Œæ•´çš„ REST APIï¼Œä¾¿äºå±•ç¤º MCP å·¥å…·è°ƒç”¨
- **ğŸ¢ ä¼ä¸šçº§åº”ç”¨**ï¼šä»£è¡¨äº†å…¸å‹çš„ä¼ä¸šçº§å·¥å…·é›†æˆåœºæ™¯
- **ğŸ”’ æƒé™ç®¡ç†**ï¼šå±•ç¤ºäº† MCP åœ¨ä¼ä¸šç¯å¢ƒä¸­çš„å®‰å…¨æ§åˆ¶
- **ğŸš€ å®ç”¨ä»·å€¼**ï¼šå¼€å‘è€…æ—¥å¸¸å·¥ä½œä¸­å¸¸ç”¨çš„å·¥å…·

## ğŸ—ï¸ MCP å¼€å‘æŠ€æœ¯æ ˆ

### MCP SDK æ ¸å¿ƒä½¿ç”¨

```typescript
// 1. åˆ›å»º MCP æœåŠ¡å™¨å®ä¾‹
const server = new Server(
  {
    name: "gitlab-mcp-server",
    version: "1.0.0",
  },
  {
    capabilities: {
      tools: {},
    },
  }
);

// 2. æ³¨å†Œå·¥å…·
server.setRequestHandler("tools/call", async (request) => {
  const { name, arguments: args } = request.params;

  switch (name) {
    case "list_projects":
      // è°ƒç”¨ GitLab API è·å–é¡¹ç›®åˆ—è¡¨
      const projects = await getGitLabProjects();
      return {
        content: [{ type: "text", text: formatProjectsList(projects) }]
      };
    case "get_project_by_name":
      // æ ¹æ®é¡¹ç›®åæœç´¢é¡¹ç›®
      const project = await getProjectByName(args.projectName);
      return {
        content: [{ type: "text", text: formatProjectInfo(project) }]
      };
    default:
      throw new Error(`Unknown tool: ${name}`);
  }
});

// 3. è¿æ¥ä¼ è¾“å±‚
const transport = new StdioServerTransport();
await server.connect(transport);
```

### MCP å¼€å‘å¿…å¤‡å·¥å…·

```json
{
  "æ ¸å¿ƒä¾èµ–": {
    "@modelcontextprotocol/sdk": "^1.17.1",
    "zod": "^3.23.8"
  },
  "å¼€å‘å·¥å…·": {
    "typescript": "^5.3.0",
    "tsx": "^4.7.0"
  },
  "ä¼ è¾“å±‚": {
    "stdio": "å†…ç½®æ”¯æŒ",
    "http": "å¯é€‰æ‰©å±•"
  }
}
```

**MCP å¼€å‘ä¸‰è¦ç´ ï¼š**
- **ğŸ“¦ SDK**ï¼šå®˜æ–¹åè®®å®ç°åº“
- **ğŸ”§ å·¥å…·**ï¼šä½ çš„ä¸šåŠ¡é€»è¾‘å°è£…
- **ğŸŒ ä¼ è¾“**ï¼šè¿æ¥ AI åŠ©æ‰‹å’ŒæœåŠ¡å™¨

## ğŸ›ï¸ MCP é€šç”¨æ¶æ„æ¨¡å¼

### MCP æœåŠ¡å™¨çš„æ ‡å‡†æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AI åŠ©æ‰‹         â”‚ â† Claudeã€Cursor ç­‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   MCP åè®®å±‚      â”‚ â† æ ‡å‡†åŒ–é€šä¿¡åè®®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å·¥å…·å±‚          â”‚ â† ä½ çš„ä¸šåŠ¡å·¥å…·å®ç°
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å¤–éƒ¨æœåŠ¡        â”‚ â† GitLabã€æ•°æ®åº“ç­‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### MCP å¼€å‘çš„æ ¸å¿ƒåŸåˆ™

- **ğŸ¯ åè®®æ ‡å‡†åŒ–**ï¼šä½¿ç”¨å®˜æ–¹ SDKï¼Œç¡®ä¿åè®®å…¼å®¹æ€§
- **ğŸ”§ å·¥å…·è§£è€¦**ï¼šä¸šåŠ¡é€»è¾‘ä¸åè®®é€»è¾‘åˆ†ç¦»
- **ğŸŒ ä¼ è¾“çµæ´»**ï¼šæ”¯æŒå¤šç§ä¼ è¾“æ–¹å¼ï¼ˆStdio/HTTPï¼‰
- **ğŸ“¦ æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¯ä¸ªå·¥å…·éƒ½æ˜¯ç‹¬ç«‹çš„æ¨¡å—

## ğŸ”§ MCP å¼€å‘å…³é”®æŠ€æœ¯

### å·¥å…·å®šä¹‰ä¸æ³¨å†Œ

```typescript
// 1. å®šä¹‰å·¥å…·æ¥å£
interface Tool {
  name: string;
  description: string;
  inputSchema: {
    type: "object";
    properties: Record<string, any>;
  };
}

// 2. å®ç°å·¥å…·é€»è¾‘ - åŸºäºå®é™…çš„ GitLab å·¥å…·
const listProjectsTool: Tool = {
  name: "list_projects",
  description: "è·å–å½“å‰GitLabå®ä¾‹ä¸­æ‰€æœ‰å¯è®¿é—®çš„é¡¹ç›®åˆ—è¡¨",
  inputSchema: {
    type: "object",
    properties: {}
  }
};

const getProjectByNameTool: Tool = {
  name: "get_project_by_name",
  description: "é€šè¿‡é¡¹ç›®åç§°æˆ–å‘½åç©ºé—´æœç´¢GitLabé¡¹ç›®",
  inputSchema: {
    type: "object",
    properties: {
      projectName: {
        type: "string",
        description: "é¡¹ç›®åç§°æˆ–å‘½åç©ºé—´ï¼Œå¦‚ 'myproject' æˆ– 'group/project'"
      }
    }
  }
};

// 3. æ³¨å†Œåˆ° MCP æœåŠ¡å™¨
server.setRequestHandler("tools/list", async () => {
  return {
    tools: [listProjectsTool, getProjectByNameTool]
  };
});

server.setRequestHandler("tools/call", async (request) => {
  const { name, arguments: args } = request.params;

  switch (name) {
    case "list_projects":
      const projects = await getGitLabProjects();
      return {
        content: [{ type: "text", text: formatProjectsList(projects) }]
      };
    case "get_project_by_name":
      const project = await getProjectByName(args.projectName);
      return {
        content: [{ type: "text", text: project ? formatProjectInfo(project) : "é¡¹ç›®æœªæ‰¾åˆ°" }]
      };
  }
});
```

### ä¼ è¾“å±‚é€‰æ‹©ç­–ç•¥

**Stdio æ¨¡å¼ï¼ˆæ¨èå¼€å‘ï¼‰**
```typescript
// æœ€ç®€å•çš„é›†æˆæ–¹å¼ï¼Œé€‚åˆæœ¬åœ°å¼€å‘å’Œæµ‹è¯•
const transport = new StdioServerTransport();
await server.connect(transport);
```
- âœ… **å¼€å‘å‹å¥½**ï¼šå¯åŠ¨å¿«ï¼Œè°ƒè¯•å®¹æ˜“
- âœ… **èµ„æºèŠ‚çœ**ï¼šæ— ç½‘ç»œå¼€é”€
- âŒ **éƒ¨ç½²é™åˆ¶**ï¼šåªèƒ½æœ¬åœ°ä½¿ç”¨

**HTTP æ¨¡å¼ï¼ˆæ¨èç”Ÿäº§ï¼‰**
```typescript
// æ”¯æŒè¿œç¨‹è®¿é—®ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒ
const transport = new StreamableHTTPServerTransport({
  port: 3000,
  endpoint: "/mcp"
});
await server.connect(transport);
```
- âœ… **è¿œç¨‹è®¿é—®**ï¼šæ”¯æŒç½‘ç»œè°ƒç”¨
- âœ… **æ‰©å±•æ€§å¥½**ï¼šå¯æ°´å¹³æ‰©å±•
- âŒ **é…ç½®å¤æ‚**ï¼šéœ€è¦ç½‘ç»œé…ç½®

## ğŸ¨ MCP å¼€å‘æœ€ä½³å®è·µ

### MCP é¡¹ç›®ç»“æ„å»ºè®®

```typescript
// åŸºäºå®é™… GitLab MCP é¡¹ç›®çš„ç»“æ„
src/
â”œâ”€â”€ index.ts              // ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ http-server.ts        // HTTP æœåŠ¡å™¨ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ mcp/
â”‚   â””â”€â”€ register-tools.ts // å·¥å…·æ³¨å†Œä¸­å¿ƒ
â”œâ”€â”€ services/             // ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ index.ts          // æœåŠ¡å¯¼å‡º
â”‚   â”œâ”€â”€ gitlab.ts         // GitLab API è°ƒç”¨
â”‚   â””â”€â”€ config.ts         // é…ç½®æœåŠ¡
â”œâ”€â”€ types/                // ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ index.ts          // ç±»å‹å¯¼å‡º
â”‚   â”œâ”€â”€ gitlab.ts         // GitLab ç›¸å…³ç±»å‹
â”‚   â””â”€â”€ config.ts         // é…ç½®ç±»å‹
â””â”€â”€ utils/                // å·¥å…·å‡½æ•°
    â”œâ”€â”€ index.ts          // å·¥å…·å¯¼å‡º
    â””â”€â”€ format.ts         // æ ¼å¼åŒ–å·¥å…·
```

### å¼€å‘æµç¨‹è§„èŒƒ

**1ï¸âƒ£ å·¥å…·è®¾è®¡é˜¶æ®µ**
```typescript
// å…ˆå®šä¹‰å·¥å…·æ¥å£ï¼Œç¡®ä¿è®¾è®¡åˆç†
interface GitLabTool {
  name: "list_projects" | "get_project_by_name";
  description: string;
  inputSchema: {
    type: "object";
    properties: Record<string, any>;
  };
}
```

**2ï¸âƒ£ åè®®å®ç°é˜¶æ®µ**
```typescript
// ä½¿ç”¨å®˜æ–¹ SDK å®ç°åè®®
server.registerTool(
  "list_projects",
  {
    title: "è·å–GitLabé¡¹ç›®åˆ—è¡¨",
    description: "è·å–å½“å‰GitLabå®ä¾‹ä¸­æ‰€æœ‰å¯è®¿é—®çš„é¡¹ç›®åˆ—è¡¨",
    inputSchema: {}
  },
  async () => {
    const projects = await getGitLabProjects();
    return {
      content: [{ type: "text", text: formatProjectsList(projects) }]
    };
  }
);
```

**3ï¸âƒ£ æµ‹è¯•éªŒè¯é˜¶æ®µ**
```typescript
// ç¡®ä¿å·¥å…·èƒ½æ­£ç¡®å“åº”
const response = await callTool("list_projects", {});
console.log(response); // éªŒè¯è¾“å‡ºæ ¼å¼å’Œæ•°æ®ç»“æ„
```

### å¸¸è§é”™è¯¯å¤„ç†æ¨¡å¼

```typescript
// åŸºäºå®é™… GitLab é¡¹ç›®çš„é”™è¯¯å¤„ç†
enum GitLabErrorType {
  NETWORK_ERROR = 'ç½‘ç»œè¿æ¥é”™è¯¯',
  AUTH_ERROR = 'è®¤è¯å¤±è´¥',
  PERMISSION_ERROR = 'æƒé™ä¸è¶³',
  API_LIMIT_ERROR = 'APIé™æµ',
  NOT_FOUND_ERROR = 'èµ„æºä¸å­˜åœ¨'
}

function handleGitLabError(error: any): string {
  // é”™è¯¯åˆ†ç±»å¤„ç†
  if (error.response?.status === 401) {
    return "âŒ è®¤è¯å¤±è´¥ï¼šè¯·æ£€æŸ¥ GitLab Token æ˜¯å¦æ­£ç¡®è®¾ç½®";
  }
  if (error.response?.status === 403) {
    return "ğŸš« æƒé™ä¸è¶³ï¼šä½ æ²¡æœ‰è®¿é—®è¯¥èµ„æºçš„æƒé™";
  }
  if (error.response?.status === 404) {
    return "ğŸ” èµ„æºä¸å­˜åœ¨ï¼šè¯·æ£€æŸ¥é¡¹ç›®åç§°æˆ–è·¯å¾„æ˜¯å¦æ­£ç¡®";
  }
  if (error.response?.status === 429) {
    return "â±ï¸ APIé™æµï¼šè¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•";
  }

  return `âŒ æœªçŸ¥é”™è¯¯ï¼š${error.message}`;
}

// åœ¨å·¥å…·ä¸­ä½¿ç”¨é”™è¯¯å¤„ç†
server.registerTool("list_projects", {...}, async () => {
  try {
    const projects = await getGitLabProjects();
    return {
      content: [{ type: "text", text: formatProjectsList(projects) }]
    };
  } catch (error) {
    return {
      content: [{ type: "text", text: handleGitLabError(error) }]
    };
  }
});
```

## ğŸš€ MCP éƒ¨ç½²æ¨¡å¼

### æœ¬åœ°å¼€å‘æ¨¡å¼

```bash
# 1. å®‰è£…ä¾èµ–
yarn install

# 2. è®¾ç½®ç¯å¢ƒå˜é‡
export GITLAB_TOKEN=your_gitlab_token
export GITLAB_URL=https://gitlab.com

# 3. æ„å»ºé¡¹ç›®
yarn build

# 4. å¯åŠ¨ MCP æœåŠ¡å™¨
yarn start

# 5. é…ç½® AI å·¥å…·
# åœ¨ Cursor æˆ– Claude Desktop ä¸­é…ç½® MCP æœåŠ¡å™¨è·¯å¾„
# è·¯å¾„æŒ‡å‘: /path/to/gitlab-mcp-server/dist/index.js
```

### äº‘ç«¯éƒ¨ç½²æ¨¡å¼

```typescript
// HTTP æœåŠ¡å™¨æ¨¡å¼éƒ¨ç½²
import { Server } from "@modelcontextprotocol/sdk/server/index.js";
import { SSEServerTransport } from "@modelcontextprotocol/sdk/server/sse.js";

const server = new Server({...});
const transport = new SSEServerTransport("/sse", response);
await server.connect(transport);
```

### éƒ¨ç½²å¹³å°æ¨è

- **Vercel**ï¼šå¿«é€Ÿéƒ¨ç½² HTTP æ¨¡å¼çš„ MCP æœåŠ¡å™¨
- **Railway**ï¼šæ”¯æŒæŒä¹…è¿è¡Œçš„äº‘æœåŠ¡
- **Fly.io**ï¼šå…¨çƒ CDNï¼Œé€‚åˆä½å»¶è¿Ÿéœ€æ±‚
- **è‡ªæ‰˜ç®¡**ï¼šä¼ä¸šå†…ç½‘ç¯å¢ƒä¸‹çš„ç§æœ‰éƒ¨ç½²

## â˜ï¸ MCP æ‰˜ç®¡å¹³å°

### å¸¸è§çš„ MCP æ‰˜ç®¡å¹³å°

#### 1. **Vercel** - å‰ç«¯äº‘å¹³å°ï¼ˆæ¨èæ–°æ‰‹ï¼‰
```bash
# å®‰è£… Vercel CLI
npm i -g vercel

# éƒ¨ç½²åˆ° Vercel
vercel --prod

# é…ç½®ç¯å¢ƒå˜é‡
vercel env add GITLAB_TOKEN
vercel env add GITLAB_URL
```

**ä¼˜ç‚¹ï¼š**
- âœ… å…è´¹é¢åº¦å……è¶³ï¼ˆæ¯æœˆ 100GB æµé‡ï¼‰
- âœ… è‡ªåŠ¨HTTPSå’Œå…¨çƒCDN
- âœ… Gité›†æˆï¼Œè‡ªåŠ¨éƒ¨ç½²
- âœ… æ”¯æŒNode.jsåŸç”Ÿ

#### 2. **Railway** - ç°ä»£åŒ–åº”ç”¨å¹³å°
```bash
# Railway CLI å®‰è£…
npm install -g @railway/cli

# ç™»å½•å¹¶éƒ¨ç½²
railway login
railway init
railway up
```

**ä¼˜ç‚¹ï¼š**
- âœ… è‡ªåŠ¨æ£€æµ‹é¡¹ç›®ç±»å‹
- âœ… å†…ç½®æ•°æ®åº“æ”¯æŒ
- âœ… ç®€å•çš„ç¯å¢ƒå˜é‡ç®¡ç†
- âœ… æŒ‰ä½¿ç”¨é‡è®¡è´¹ï¼Œæ€§ä»·æ¯”é«˜

#### 3. **Render** - äº‘åº”ç”¨å¹³å°
```yaml
# render.yaml
services:
  - type: web
    name: gitlab-mcp-server
    runtime: node
    buildCommand: yarn build
    startCommand: yarn start:http
    envVars:
      - key: GITLAB_TOKEN
        value: your-token
      - key: GITLAB_URL
        value: https://gitlab.com
```

**ä¼˜ç‚¹ï¼š**
- âœ… 750å°æ—¶/æœˆçš„å…è´¹é¢åº¦
- âœ… æ”¯æŒDockerå’ŒåŸç”Ÿéƒ¨ç½²
- âœ… è‡ªåŠ¨SSLè¯ä¹¦
- âœ… ç®€å•çš„Webç•Œé¢ç®¡ç†

#### 4. **Fly.io** - è¾¹ç¼˜è®¡ç®—å¹³å°
```toml
# fly.toml
app = "gitlab-mcp-server"

[build]
  builder = "paketobuildpacks/builder:base"
  buildpacks = ["gcr.io/paketo-buildpacks/nodejs"]

[http_service]
  internal_port = 3000
  force_https = true
```

```bash
# éƒ¨ç½²å‘½ä»¤
fly launch
fly deploy
```

**ä¼˜ç‚¹ï¼š**
- âœ… å…¨çƒ160ä¸ªæ•°æ®ä¸­å¿ƒ
- âœ… ä½å»¶è¿Ÿè®¿é—®
- âœ… DockeråŸç”Ÿæ”¯æŒ
- âœ… æŒ‰å®é™…ä½¿ç”¨è®¡è´¹

### Docker å®¹å™¨åŒ–éƒ¨ç½²

#### é€šç”¨ Docker éƒ¨ç½²
```dockerfile
# Dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN yarn install --production
COPY . .
RUN yarn build
EXPOSE 3000
CMD ["yarn", "start:http"]
```

**æ”¯æŒ Docker çš„å¹³å°ï¼š**
- **Railway** - è‡ªåŠ¨æ£€æµ‹
- **Render** - æ”¯æŒDockerfile
- **Fly.io** - åŸç”ŸDockeræ”¯æŒ
- **Google Cloud Run** - å®¹å™¨å³æœåŠ¡
- **AWS ECS/Fargate** - å®¹å™¨ç¼–æ’

### ä¼ä¸šçº§éƒ¨ç½²é€‰é¡¹

#### AWS Lambda + API Gateway
```yaml
# serverless.yml ç¤ºä¾‹
service: gitlab-mcp-server

provider:
  name: aws
  runtime: nodejs18.x
  environment:
    GITLAB_TOKEN: ${env:GITLAB_TOKEN}
    GITLAB_URL: ${env:GITLAB_URL}

functions:
  mcpHandler:
    handler: dist/http-server.serverlessHandler
    events:
      - http:
          path: /mcp
          method: post
          cors: true
```

```typescript
// http-server.ts ä¸­çš„ serverless å¯¼å‡º
export const serverlessHandler = async (event, context) => {
  // å¤„ç† Lambda äº‹ä»¶
  return {
    statusCode: 200,
    body: JSON.stringify({ message: "MCP response" })
  };
};
```

### æ‰˜ç®¡å¹³å°å¯¹æ¯”

| å¹³å° | å…è´¹é¢åº¦ | éƒ¨ç½²å¤æ‚åº¦ | æ‰©å±•æ€§ | æ¨èæŒ‡æ•° |
|------|---------|-----------|--------|---------|
| **Vercel** | â­â­â­â­â­ | â­â­ | â­â­â­ | â­â­â­â­â­ |
| **Railway** | â­â­â­â­ | â­â­ | â­â­â­ | â­â­â­â­â­ |
| **Render** | â­â­â­â­â­ | â­â­ | â­â­â­ | â­â­â­â­â­ |
| **Fly.io** | â­â­â­ | â­â­â­ | â­â­â­â­â­ | â­â­â­â­ |
| **AWS** | â­â­ | â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­ |

### é€‰æ‹©å»ºè®®

**ä¸ªäººå¼€å‘è€…/å°å‹é¡¹ç›®ï¼š**
- ğŸš€ **Vercel** - ç®€å•å¿«é€Ÿï¼Œå…è´¹é¢åº¦å……è¶³
- ğŸ¯ **Railway** - ç°ä»£åŒ–ï¼Œè‡ªåŠ¨æ£€æµ‹é¡¹ç›®

**å›¢é˜Ÿ/ä¼ä¸šåº”ç”¨ï¼š**
- ğŸ¢ **Render** - ç¨³å®šçš„å…è´¹å±‚çº§
- ğŸŒ **Fly.io** - å…¨çƒåŒ–çš„ä½å»¶è¿ŸæœåŠ¡

**ç”Ÿäº§ç¯å¢ƒï¼š**
- â˜ï¸ **AWS/GCP/Azure** - ä¼ä¸šçº§åŠŸèƒ½å’Œæ”¯æŒ

## ğŸ’¡ æ€»ç»“ä¸å¯å‘

### MCP çš„æ ¸å¿ƒä»·å€¼

**MCP ä¸åªæ˜¯å·¥å…·è°ƒç”¨åè®®ï¼Œæ›´æ˜¯ï¼š**

- **ğŸ”— æ ‡å‡†åŒ–æ¡¥æ¢**ï¼šè¿æ¥ AI ä¸å¤–éƒ¨ä¸–ç•Œçš„ç»Ÿä¸€æ¥å£
- **ğŸ¢ ä¼ä¸šå‹å¥½**ï¼šå®Œç¾é€‚é…ä¼ä¸šå†…ç½‘å’Œå®‰å…¨éœ€æ±‚
- **ğŸš€ æ•ˆç‡å€å¢**ï¼šè®© AI åŠ©æ‰‹æˆä¸ºçœŸæ­£å¼ºå¤§çš„ç”Ÿäº§åŠ›å·¥å…·
- **ğŸŒŸ ç”Ÿæ€åŸºç¡€**ï¼šæ„å»º AI åº”ç”¨æ–°ç”Ÿæ€çš„åŸºçŸ³

### MCP å¼€å‘çš„å¿ƒå¾—ä½“ä¼š

1. **ğŸ¯ åè®®æ€ç»´**ï¼šä¼˜å…ˆé€‰æ‹©æ ‡å‡†åè®®ï¼Œä¸“æ³¨ä¸šåŠ¡é€»è¾‘è€Œéåº•å±‚é€šä¿¡
2. **ğŸ”§ å·¥å…·æŠ½è±¡**ï¼šå°†å¤æ‚ä¸šåŠ¡é€»è¾‘å°è£…ä¸ºæ ‡å‡†åŒ–çš„å¯è°ƒç”¨å·¥å…·
3. **ğŸŒ ä¼ è¾“é€‰æ‹©**ï¼šæ ¹æ®åœºæ™¯é€‰æ‹©åˆé€‚çš„ä¼ è¾“æ–¹å¼ï¼ˆStdio/HTTPï¼‰
4. **ğŸ“¦ æ¸è¿›å¼€å‘**ï¼šä»å°å·¥å…·å¼€å§‹ï¼Œé€æ­¥æ„å»ºå®Œæ•´çš„ MCP åº”ç”¨

### MCP æŠ€æœ¯çš„æœªæ¥å±•æœ›

- **ğŸ¤– Agent ç”Ÿæ€**ï¼šæ›´å¤šæ™ºèƒ½ä½“åŸºäº MCP æ„å»º
- **ğŸ”§ å·¥å…·ç”Ÿæ€**ï¼šä¸°å¯Œçš„é¢„åˆ¶å·¥å…·æ»¡è¶³å„ç§ä¸šåŠ¡éœ€æ±‚
- **ğŸ¢ ä¼ä¸šåº”ç”¨**ï¼šåœ¨ä¼ä¸šç¯å¢ƒä¸­å‘æŒ¥æ›´å¤§ä»·å€¼
- **ğŸš€ æ€§èƒ½ä¼˜åŒ–**ï¼šæ›´é«˜æ•ˆçš„é€šä¿¡åè®®å’Œå·¥å…·è°ƒç”¨

---

**ğŸ‰ æ¬¢è¿äº¤æµ**ï¼šå¦‚æœä½ å¯¹ MCP åè®®ã€GitLab API é›†æˆæˆ–ç›¸å…³æŠ€æœ¯æ„Ÿå…´è¶£ï¼Œæ¬¢è¿åœ¨é¡¹ç›®ä¸­æå‡º Issue æˆ–æäº¤ PR è®©æˆ‘ä»¬ä¸€èµ·æ¢è®¨å’Œæ”¹è¿›ï¼
